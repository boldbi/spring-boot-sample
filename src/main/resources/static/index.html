<!DOCTYPE HTML>
<html>
<head> 
    <title>Bold BI</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/1.0.0-beta/jsrender.min.js"></script>
    <script type="text/javascript" src="https://cdn.boldbi.com/embedded-sdk/v6.1.8/boldbi-embed.js"></script>    
</head>
<body onload="renderDashboard()"> 
    <div id="viewer-section">
        <div id="dashboard"></div>
    </div>
</body>
<script>
    function renderDashboard() {
        fetch('/embedConfig')
            .then(response => response.json())
            .then(data => {
                // ... (retrieve other values from the JSON file as needed)

                var dashboard = BoldBI.create({
                    serverUrl: data.ServerUrl + "/" + data.SiteIdentifier,
                    dashboardId: data.DashboardId,
                    embedContainerId: "dashboard",
                    embedType: BoldBI.EmbedType.Component,
                    environment:data.Environment,
                    width: window.innerWidth + "px",
                    height: window.innerHeight + "px",
                    mode: BoldBI.Mode.View,
                    expirationTime: 100000,
                    authorizationServer: {
                        url: "/GetDetails" 
                    }
                });

                dashboard.loadDashboard();
            })
            .catch(error => {
                console.error('Error fetching embedConfig:', error);
                // Handle the error as needed
            });
    };
</script>
</html>
